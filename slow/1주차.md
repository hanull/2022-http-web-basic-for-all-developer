# 네트워크

### **IP (인터넷 프로토콜)**

- IP 주소로 메시지를 전달할 수 있도록 정해놓은 규칙
- IP 역할
    - 지정한 IP 주소(IP Address)에 데이터 전달
    - 패킷(Packet)이라는 통신 단위로 데이터 전달
- IP 패킷 정보
    - 출발지 IP, 목적지 IP, 전송 데이터를 묶은 하나의 블록 단위
- 패킷 전달 방법
    - 클라이언트가 출발지와 도착지의 IP 주소를 넣고 인터넷망에 던지면, 인터넷망의 노드를 거쳐 도착지 서버에 도착하게 된다.
    - 클라이언트의 요청을 받으면, 서버도 똑같은 방법으로 잘받았다는 응답을 던져준다.

### IP 프로토콜의 한계

- 비연결성
    - 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송
    - 대상 서버가 패킷을 받을 수 있는 상태인지 모름
- 비신뢰성
    - 중간 노드에 문제가 생기는 등 패킷이 도착하기 전에 소실되도 알 수 없다.
        - ex) 택배를 보냈는데 택배가 물류센터에서 사라짐
    - 패킷이 순서대로 오지 않을 경우
        - hello, world 를 보냈는데, 상대방은 world hello로 받을 수 있다.
- 프로그램 구분
    - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상인 경우, 구분할 수 없다.
    

### TCP

IP 프로토콜의 문제점을 해결해주는 프로토콜이 TCP 프로토콜이다.

1. 프로그램이 Hello 메시지 생성
2. Socket 라이브러리를 통해서 메시지에다가 TCP 정보를 씌움
3. IP 정보를 또 씌움
4. 정보를 포함한 패킷을 LAN 카드를 통해서 물리적인 정보를 포함하여 인터넷을 통해 서버에 전달


### TCP 특징

전송 제어 프로토콜(Transmission Control Protocol) 

- 연결지향
    - TCP 3way handshake (가상 연결) 방식 제공
- 데이터 전달 보증
    - 서버는 데이터를 받으면, 받았다는 응답을 보낸다.
- 순서 보장
    - 서버에서 잘못 받았다면, 특정 패킷부터 다시 보내라고 클라이언트에게 재요청 한다.
- 신뢰할 수 있는 프로토콜
- 현재 대부분 TCP 사용

### TCP 3way handshake

1. 클라이언트가 서버측에 연결 요청 메시지 전송 (SYN)
    - 송신자가 최초로 데이터를 전송할 때 Sequence Number를 임의의 랜덤 숫자(n)로 지정하고, SYN 플래그 비트를 1로 설정한 세그먼트를 전송한다.
2. 서버는 클라이언트의 요청을 승낙 및 응답 요청 확인 메시지 전송 (ACK, SYN)
3. 클라이언트는 확인 ACK 전달하고 연결. (ACK)
    - 현재는 최적화 되어서 ACK를 보낼 때, 데이터를 함께 전송한다.
    

### UDP 특징

사용자 데이터그램 프로토콜(User Datagram Protocol)

- 비연결형, 단방향으로 데이터를 전송
- 데이터 전달 보증 X
- 순서 보장 X
- 속도가 빠름
- 신뢰성이 중요하지 않은 서비스에 적합
    - 영상 스트리밍, DNS

### PORT

IP

- 목적지 서버를 구분

PORT

- 서버 안에서 애플리케이션 구분
- 같은 IP 내에서 프로세스를 구분

ex)  ㅇㅇ아파트 (IP) 101동 201호(PORT)

- 0~65535 번 까지는 할당이 가능
- 0~1023 번 까지는 잘 알려진 포트들로 사용하지 않는것이 좋습니다.
    - FTP - 20, 21
    - TELNET - 23
    - HTTP - 80
    - HTTPS - 443